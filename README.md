# ONE STORAGE

## コンセプト
ONE STORAGEは、レンタルサーバーに割り当てられた余剰なストレージリソースを最大限に活用する、**軽量な動作**に特化したファイルストレージサービスです。
その目的は **「個人が本当に秘密にしたい、誰にも見られたくないセンシティブな情報」** を、**安価・軽量・安定**して保管することにあります。

ONESTORAGEは低スペックかつ安価なレンタルサーバー環境（Lollipopのエコノミープラン）でも安定して稼働することを確認しています。
※2025年10月3日時点

## ユースケース
* **レンタルサーバーユーザー:** サーバーの使いきれてないデータ保存容量を個人のストレージとして有効活用する
* **プライバシー重視のユーザー:** 大手クラウドサービスの**AI監査や外部の検閲**からデータを完全に切り離し、**機密性の高いプライベートデータ**を隔離された環境に保管する
* **NextCloudユーザー:** 高機能サービスのために維持していたハイスペックなプランを、より安価なプランに切り替えるなど、**レンタルサーバーのコスト最適化**する

## 動作環境
動作要件はサーバー環境がPHP8.0以上で動作することとサーバーディレクトリの権限変更ができることだけです。
この要件は日本国内のほとんどのレンタルサーバー（低価格プランを含む）が満たします。
| 特徴 | 説明 | メリット |
|-|-|-|
| **PHP8.0ネイティブ** | 外部ライブラリに一切依存しません |composerなどの利用が制限されるレンタルサーバー契約でも動作します |
| **DBレス構成** | データベース（DB）を一切使用しません | DBのないレンタルサーバー契約でも動作します |
| **チャンクアップロード** | ファイルを分割してファイル転送します| 大容量ファイルもサーバーの**アップロード上限や実行時間制限を回避**して安定してアップロードできます。 |

## 主要機能

| 機能名 | 説明 |
| :--- | :--- |
| **INBOX機能** | 整理されたディレクトリと隔絶された、一時的にファイルを預けるための特別な場所。</BR>フォルダ削除等でユーザーが誤ってデータ削除する危険がない「とりあえず保存」場所として機能します。 |
| **スター（★）機能** | 頻繁にアクセスしたいファイルやフォルダをマークし、専用のビューで一覧表示できます。 |
| **機能の最小化** | ファイルのCRUD操作といった、**ファイルストレージとして必要最低限の機能**のみを提供します。 |

## 制限・重要事項説明
ONESTORAGEはシングルユーザー専用のセルフホスティングファイルストレージツールです。**あなただけのプライベートなストレージ** を構築することを目的としています。

- **ユーザーアカウント共有の禁止:** 現時点で複数ユーザーを許容していません。ユーザーアカウントの共有は事実上可能ですが、推奨しておりません。
- **サーバー利用規約の遵守:** 事前にサーバーの利用規約を確認し、遵守してください。例えば、特定のジャンルのコンテンツの配布・公開を禁止しているサーバーがあります。この場合、ONESTORAGEは特定のジャンルのコンテンツを保管できるでしょう。しかし、サーバーが保管そのものを禁止している場合、ユーザーはそれを遵守してください。
- **個人責任:** 本ツールの利用は個人の責任で行ってください。これにはソースコードの改変なども含みます。特に**根本的な脆弱性**を充分に理解した上で利用してください。

ONESTORAGEはレンタルサーバーなどの空きリソースを活用し、主に個人のセンシティブなデータ保存することが目的です。一定の外部アクセスなどへのセキュリティは施していますが、データを保護するという機能を有していません。**安価なサーバーでも運用できることを優先しているため、保護機能はトレードオフ**されています。

### 根本的な脆弱性
ONESTORAGEはDBレスで超軽量なファイルストレージである代わりに、そのファイル保存に根本的な脆弱性をもっています。
ここでは、脆弱性について主に対抗サービスであるNextCloudと比較して説明します。
保存するデータに関しては後述する**保存データ** を参照してください。
また、ONESTORAGEはこの脆弱性を許容しており、今後も対応する予定はありません。
その理由については、サーバー侵害に対する根本的な考え方にあります。ぜひ[`README-server-security.md`](readme/README-server-security.md)を参照してください。これは多くの方に考えてほしい内容です。

**生データを直接サーバーに保管するデメリット:** 
ONESTORAGEはサーバーに直接、**生のデータ** を保存します。これはONESTORAGEが外部アクセスを禁止していたとしても、サーバーが直接クラックされた場合、直接データ侵害されることを意味します。ONESTORAGEがパスワードなどの損害を被るデータの保管を非推奨としている理由はここにあります。サーバーがクラックされ、不正にデータがアクセスされた場合、あなたのデータを守る手段は一切ありません。
NextCloudはサーバーには直接データをファイルシステムに保存するだけでなく、暗号化したデータとしてDBに書き込み保存処理を行います。DBがクラックされた場合、データ侵害されることはONESTORAGEと同様ですが、侵害されたデータを閲覧する場合には暗号を解読し、データを復元する必要があります。Nextcloudはサーバーやデータベースがクラックされたとしてもあなたのデータに対して一定の防御機構があります。ほかにもNextCloudには、AES暗号化、アクセス制御、監査ログ高度なセキュリティ機能を多数有します。

**生データを直接サーバーに保管するメリット:** 
ローカルにデータが存在しない場合、この脆弱性にはデータの復元性というメリットも存在します。
ONESTORAGEのシステムが何らかの理由でクラッシュしたとき、ユーザーはFTP等でサーバーに保存されているデータを高確率で取り戻すことができます。システムがクラッシュしても、データそのものはクラッシュするわけではないからです。
NextCloudでシステムクラッシュした場合、データを復旧するためにはバックアップの復元作業を行う必要があります。このバックアップの復元作業はユーザーが事前に設定してあるNextCloudの状態に依存します。データを復元する方法はありますが、復元には手順や設定が必要です。また、必ずしもデータが復元できるわけではないことに留意するべきです。

### 保存データ
#### 保存してはいけないデータ:
損害を被るデータなどのは保存しないでください。例えば、IDやパスワードなどを記載したデータはより厳格なセキュリティで管理されるサービスを利用してください。
- **具体例:**
  - IDやPASSWROD
  - 金融資産に関するデータ
  - 重要契約書

#### 保存してよいデータ
以下のデータは、ONESTORAGEのプライバシー重視の設計と、クラッシュ時の高いデータ復元性というメリットを最大限に活かせます。
|カテゴリ|例|理由|
|-|-|-|
|プライベートなコンテンツ|個人的な写真や動画・PDFなどのコンテンツ|監査AIによる誤認（例：アダルト）を懸念する、誰にも見られたくない機密性の高いデータ|
|アイデアと創作物|私的な創作物、日記（公開意図がないもの）、デザインデータ、アイデアメモ|外部サービスに預けることで権利を譲渡したり、ポリシー改定によってデータが脅かされたりするリスクを回避|
|コスト最適化データ|アクセス頻度が低いが保管が必要なデータ	|預け先が決定できないデータを一時保管することで、外部ストレージのリソースを削減できます|

## ドキュメント構成
より詳細な情報は、以下のドキュメントを参照してください。

| ファイル名 | 内容 | ターゲット |
|-|-|-|
|[`README-concept.md`](readme/README-concept.md) |コンセプトのディティール・利用の目的|全ユーザー|
|[`README-install.md`](readme/README-install.md) | デプロイ（インストール）手順 | 全てのユーザー |
|[`README-server-security.md`](readme/README-server-security.md) | セキュリティ特にサーバーに関する考え方 | 全てのユーザー |
|[`README-development.md`](readme/README-development.md) | ディレクトリ構成、命名規則、セキュリティなど、開発者が参照すべき情報 | 開発者、コントリビューター |